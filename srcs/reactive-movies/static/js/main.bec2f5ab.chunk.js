(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{30:function(e,t,a){e.exports=a.p+"static/media/logo.5d5d9eef.svg"},31:function(e,t){e.exports="data:image/gif;base64,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"},35:function(e,t,a){e.exports=a(65)},46:function(e,t,a){},48:function(e,t,a){},50:function(e,t,a){},52:function(e,t,a){},54:function(e,t,a){},56:function(e,t,a){},58:function(e,t,a){},60:function(e,t,a){},65:function(e,t,a){"use strict";a.r(t);var A=a(0),n=a.n(A),i=a(25),o=a.n(i),r=a(68),l=a(11);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var c=a(29),s=a.n(c)()(),m=(a(46),a(48),a(50),a(5)),u=a(6),p=a(8),v=a(7),h=a(9),g=a(66),f=a(70),d=a(69),E=a(67),y=a(30),k=a.n(y),b=(a(52),"07dc8f6435c41ca3ef4a46c9a0f91344"),_={getMoviesList:function(e){return N("https://api.themoviedb.org/3/movie/".concat(e,"?api_key=").concat(b,"&language=en-US&page=1"))},getGenresList:function(){return N("https://api.themoviedb.org/3/genre/movie/list?api_key=".concat(b,"&language=en-US"))},getMovieById:function(e){return N("https://api.themoviedb.org/3/movie/".concat(e,"?api_key=").concat(b,"&language=en-US"))},getCollection:function(e){return N("https://api.themoviedb.org/3/collection/".concat(e,"?api_key=").concat(b,"&language=en-US"))},getSimilarMovies:function(e){return N("https://api.themoviedb.org/3/movie/".concat(e,"/recommendations?api_key=").concat(b,"&language=en-US&page=1"))},getMoviesByGenre:function(e){return N("https://api.themoviedb.org/3/genre/".concat(e,"/movies?page=1&sort_by=created_at.asc&language=en-US&api_key=").concat(b))},findMovies:function(e){return N("https://api.themoviedb.org/3/search/movie?query=".concat(e,"&page=1&language=en-US&api_key=").concat(b))}},N=function(e){return fetch(e).then(function(e){return e.json()})},M=_,S=(a(54),function(e){function t(){return Object(m.a)(this,t),Object(p.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"adjustPosterPath",value:function(){return"https://image.tmdb.org/t/p/w500".concat(this.props.movie.poster_path)}},{key:"sliceMovieOverview",value:function(){return this.props.movie.overview.length>100?"".concat(this.props.movie.overview.slice(0,97),"..."):this.props.movie.overview}},{key:"spliceMovieGenres",value:function(){return this.props.movie.genre_ids.length>4&&this.props.movie.genre_ids.splice(3,this.props.movie.genre_ids.length-3),this.props.movie.genre_ids}},{key:"componentWillMount",value:function(){var e=this,t=this.props.movie.genre_ids.reduce(function(t,a){var A;return e.props.genresList.map(function(e){return A=A||(a===e.id?e.name:null)}),t.push({id:a,name:A}),t},[]);this.props.movie.genre_ids=t}},{key:"render",value:function(){var e=this.props.movie;return n.a.createElement("section",{className:"movie"},n.a.createElement("div",{className:"movie-header"},n.a.createElement(g.a,{to:"/movie/".concat(this.props.movie.id),className:"colored-link"},n.a.createElement("h3",{className:"movie_title"},e.title)),n.a.createElement("i",{className:"fa fa-star"})),n.a.createElement("article",{className:"movie-body"},n.a.createElement("figure",null,n.a.createElement("div",{className:"movie_img-wrapper"},n.a.createElement("img",{className:"movie_img",src:this.adjustPosterPath(),alt:"movie_poster",tabIndex:"0"})),n.a.createElement("figcaption",null,n.a.createElement("article",{className:"movie-body_genres"},n.a.createElement("p",{className:"bold"},"Genre :"),n.a.createElement("ul",null,this.spliceMovieGenres().map(function(e,t){return n.a.createElement("li",{key:t},e.name)}))),n.a.createElement("p",{className:"movie-body_release bold"},"Release :",n.a.createElement("span",null,e.release_date)))),n.a.createElement("p",{className:"movie-body_overview"},this.sliceMovieOverview()),n.a.createElement("p",{className:"movie-body_vote"},e.vote_average)))}}]),t}(n.a.Component)),O=Object(l.b)(function(e){return{genresList:e.genresList}},function(e){return{}})(S),j=(a(56),function(e){function t(){return Object(m.a)(this,t),Object(p.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentWillMount",value:function(){this.uploadMoviesList()}},{key:"componentWillReceiveProps",value:function(e,t){console.log(e),t.location||e.location.pathname===this.props.location.pathname||this.uploadMoviesList(e.match.params)}},{key:"uploadMoviesList",value:function(e){var t=e||this.props.match.params;switch(console.log(t),t.filter){case"genre":return this.props.onFetchMoviesListByGenreId(t.filter_id);case"search":return console.log(t),[];default:return this.props.onFetchMoviesList(t.filter)}}},{key:"render",value:function(){var e=this.props.moviesList;return n.a.createElement("section",{className:"main-content movies-list"},e.length?n.a.createElement("ul",{className:"main-content_movies-list"},e.map(function(e,t){return n.a.createElement(O,{key:t,movie:e})})):n.a.createElement("p",null,"Waiting for movies"))}}]),t}(n.a.Component)),C=Object(l.b)(function(e){return{moviesList:e.moviesList}},function(e){return{onFetchMoviesList:function(t){e(function(e){return function(t){M.getMoviesList(e).then(function(e){return t({type:"ADD_MOVIES_LIST",payload:e.results})})}}(t))},onFetchMoviesListByGenreId:function(t){e(function(e){return function(t){M.getMoviesByGenre(e).then(function(e){return t({type:"ADD_MOVIES_LIST",payload:e.results})})}}(t))}}})(j),I=a(12),L=(a(58),[{name:"Popular",linkName:"popular"},{name:"Favorite",linkName:"favorite"},{name:"Upcoming",linkName:"upcoming"},{name:"Top rated",linkName:"top_rated"}]),w=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(v.a)(t).call(this,e))).state={collapsed:!1,searchResults:null},a.handleSearchInputChange=a.handleSearchInputChange.bind(Object(I.a)(Object(I.a)(a))),a.onSubmitSearchForm=a.onSubmitSearchForm.bind(Object(I.a)(Object(I.a)(a))),a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"adjustPosterPath",value:function(e){return"https://image.tmdb.org/t/p/w200".concat(e)}},{key:"componentWillMount",value:function(){this.props.onFetchGenresList()}},{key:"transformSearchRequest",value:function(e){e.results.length>3?this.setState({searchResults:e.results.splice(0,3)}):this.setState({searchResults:e.results})}},{key:"handleSearchInputChange",value:function(){var e=this;this.searchIput.value.length>2?M.findMovies(this.searchIput.value).then(function(t){return e.transformSearchRequest(t)}):this.setState({searchResults:null})}},{key:"onSubmitSearchForm",value:function(e){e.preventDefault(),this.searchIput.value.length}},{key:"render",value:function(){var e=this,t=this.props.genresList;return n.a.createElement("section",{className:"side-menu navigation collapsed-".concat(this.state.collapsed)},t.length>0?n.a.createElement(A.Fragment,null,n.a.createElement("article",{className:"navigation_short-info"},n.a.createElement("p",null,"Active filter"),n.a.createElement("form",{className:"navigation_search",onSubmit:function(t){return e.onSubmitSearchForm(t)}},n.a.createElement("input",{type:"text",name:"name",ref:function(t){return e.searchIput=t},onChange:this.handleSearchInputChange}),n.a.createElement("input",{type:"submit",value:"Search",onClick:this.onSubmitSearchForm})),n.a.createElement("span",{className:"navigation_short-info_collapse_btn",onClick:function(){return e.setState({collapsed:!e.state.collapsed})}},n.a.createElement("i",{className:"fa fa-chevron-down"}))),n.a.createElement("div",{className:"navigation_main-content"},n.a.createElement("article",{className:"navigation-genres-list"},n.a.createElement("ul",null,t.map(function(e,t){return n.a.createElement("li",{key:t},n.a.createElement(g.a,{to:"/genre/".concat(e.id,"/page/1"),className:"dark-link"},e.name))}))),n.a.createElement("article",{className:"navigation-filters-list"},n.a.createElement("ul",null,L.map(function(e,t){return n.a.createElement("li",{key:t},n.a.createElement(g.a,{to:"/".concat(e.linkName,"/-1/page/1"),className:"dark-link"},e.name))}))),n.a.createElement("article",{className:"navigation-search-results"},this.state.searchResults?n.a.createElement("ul",null,this.state.searchResults.map(function(t,a){return n.a.createElement("li",{key:a},n.a.createElement("figure",null,n.a.createElement("img",{src:e.adjustPosterPath(t.poster_path),alt:"movie_poster"}),n.a.createElement("figcaption",null,n.a.createElement(g.a,{to:"/movie/".concat(t.id),className:"dark-link"},t.title))))})):n.a.createElement("p",null)))):n.a.createElement("p",null,"Waiting for genres"))}}]),t}(n.a.Component),B=Object(l.b)(function(e){return{genresList:e.genresList}},function(e){return{onFetchGenresList:function(){e(function(e){M.getGenresList().then(function(t){return e({type:"ADD_GENRES_LIST",payload:t.genres})})})},onFetchMoviesByKey:function(t){e(function(e){return function(t){M.findMovies(e).then(function(e){return t({type:"ADD_MOVIES_LIST",payload:e.results})})}}(t))}}})(w),P=(a(60),a(31)),D=a.n(P),G=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(p.a)(this,Object(v.a)(t).call(this,e))).httpClient=M,a.state={movie:null,collectionParts:null,similarMovies:null},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"adjustBackdropPath",value:function(){return"https://image.tmdb.org/t/p/original".concat(this.state.movie.backdrop_path)}},{key:"adjustPosterPath",value:function(e){return e?"https://image.tmdb.org/t/p/w200".concat(e):"no_poster_image_avaliable.jpeg"}},{key:"componentWillMount",value:function(){this.uploadMovie(this.props.match.params.movieId)}},{key:"componentWillReceiveProps",value:function(e,t){!t.location&&e.location.pathname&&(console.log("here"),this.uploadMovie(e.match.params.movieId))}},{key:"uploadMovie",value:function(e){var t=this;this.httpClient.getMovieById(parseInt(e,10)).then(function(e){return t.setState({movie:e}),e}).then(function(e){t.getCollection(e),t.getSimilarMovies(e)})}},{key:"getSimilarMovies",value:function(e){var t=this;this.httpClient.getSimilarMovies(e.id).then(function(e){console.log(e),e.results.length>5?t.setState({similarMovies:e.results.slice(0,5)}):t.setState({similarMovies:e.results})})}},{key:"getCollection",value:function(e){var t=this;e.belongs_to_collection&&this.httpClient.getCollection(e.belongs_to_collection.id).then(function(e){e.parts.length>5?t.setState({collectionParts:e.parts.slice(0,5)}):t.setState({collectionParts:e.parts})})}},{key:"render",value:function(){var e=this,t=this.state.movie;return this.votesContainer&&(this.votesContainer.style="background: linear-gradient(to right, #4058B1 0%, #4058B1 ".concat(10*t.vote_average,"%, ").concat(10*t.vote_average,"%, #fff 100%);")),n.a.createElement("section",{className:"main-content"},n.a.createElement("section",{className:"movie-details"},t?n.a.createElement(A.Fragment,null,n.a.createElement("span",{className:"movie-details_votes",ref:function(t){e.votesContainer=t}},n.a.createElement("img",{src:D.a,alt:"votes_image"})),n.a.createElement("h3",{className:"movie-details_title"},n.a.createElement(g.a,{to:t.homepage,className:"colored-link bold"},t.title),n.a.createElement("span",{className:"movie-details_title_status"},t.status)),n.a.createElement("img",{className:"movie-details_poster",src:this.adjustBackdropPath(),alt:"movie_poster"}),n.a.createElement("p",{className:"movie-details_tagline"},t.tagline),n.a.createElement("p",{className:"movie-details_overview"},t.overview),n.a.createElement("article",{className:"movie-details_genres"},n.a.createElement("p",{className:"movie-details-article_title"},"Genres"),n.a.createElement("ul",null,t.genres.map(function(e,t){return n.a.createElement("li",{key:t},n.a.createElement(g.a,{to:"/genre/".concat(e.id,"/page/1"),className:"dark-link"},e.name))}))),n.a.createElement("article",{className:"movie-details_companies"},n.a.createElement("p",{className:"movie-details-article_title"},"Companies"),n.a.createElement("ul",null,t.production_companies.map(function(e,t){return n.a.createElement("li",{key:t},e.name)}))),n.a.createElement("article",{className:"movie-details_collection"},n.a.createElement("p",{className:"movie-details-article_title"},"Collection"),this.state.collectionParts?n.a.createElement(A.Fragment,null,n.a.createElement("ul",null,this.state.collectionParts.map(function(t,a){return n.a.createElement("li",{key:a},n.a.createElement("figure",null,n.a.createElement("img",{src:e.adjustPosterPath(t.poster_path),alt:"collection_part_poster"}),n.a.createElement("figcaption",null,n.a.createElement(g.a,{to:"/movie/".concat(t.id),className:"dark-link"},t.title))))}))):n.a.createElement("p",null,"No collection found for this film")),n.a.createElement("article",{className:"movie-details_similar"},n.a.createElement("p",{className:"movie-details-article_title"},"Silimar movies"),this.state.similarMovies?n.a.createElement("ul",null,this.state.similarMovies.map(function(t,a){return n.a.createElement("li",{key:a,onClick:function(){return e.props.history.push("/movie/".concat(t.id))}},n.a.createElement("figure",null,n.a.createElement("img",{src:e.adjustPosterPath(t.poster_path),alt:"similar_movie_poster"}),n.a.createElement("figcaption",null,t.title)))})):n.a.createElement("p",null,"Loading similar movies"))):n.a.createElement("p",null,"Loading movie information")))}}]),t}(n.a.Component),R=function(e){function t(){return Object(m.a)(this,t),Object(p.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return n.a.createElement("div",{className:"App"},n.a.createElement("header",null,n.a.createElement(g.a,{to:"/",className:"header_link link"},n.a.createElement("img",{src:k.a,className:"App-logo",alt:"logo"}),n.a.createElement("h1",null,"movies"))),n.a.createElement("main",{className:"center-content"},n.a.createElement(B,null),n.a.createElement(f.a,null,n.a.createElement(d.a,{exact:!0,path:"/",render:function(){return n.a.createElement(E.a,{to:"/popular/-1/page/1"})}}),n.a.createElement(d.a,{path:"/search/:key/page/:page",component:C}),n.a.createElement(d.a,{path:"/:filter/:filter_id/page/:page",component:C}),n.a.createElement(d.a,{path:"/movie/:movieId",component:G}))),n.a.createElement("footer",null,n.a.createElement("p",null,"Copyrate \xa9 Ilya Belavusau")))}}]),t}(A.Component),W=a(10),q=a(32),F=a(33),U=a(34),Q=[];var x=[];var J=Object(W.combineReducers)({routing:U.routerReducer,moviesList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_MOVIES_LIST":return t.payload;default:return e}},genresList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_GENRES_LIST":return t.payload;default:return e}}}),K=Object(W.createStore)(J,Object(q.composeWithDevTools)(Object(W.applyMiddleware)(F.a)));o.a.render(n.a.createElement(l.a,{store:K},n.a.createElement(r.a,{history:s},n.a.createElement(R,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[35,2,1]]]);
//# sourceMappingURL=main.bec2f5ab.chunk.js.map